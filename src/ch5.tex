\chapter{Differentiation}

\Exercise1 Let $f$ be defined for all real $x$, and suppose that
\begin{equation}
  \label{exercise:diff:f-bounded-by-x-minus-y-sq}
  \abs{f(x) - f(y)} \leq (x - y)^2
\end{equation}
for all real $x$ and $y$. Prove that $f$ is constant.
\begin{proof}
  From \eqref{exercise:diff:f-bounded-by-x-minus-y-sq}, if $x\neq y$
  we have
  \begin{equation*}
    \Abs{\frac{f(x) - f(y)}{x-y}} \leq \abs{x - y}.
  \end{equation*}
  Now letting $y\to x$ we get
  \begin{equation*}
    f'(x) = 0.
  \end{equation*}
  Since this is true for all $x$, $f$ must be constant by
  Theorem~5.11.
\end{proof}

\Exercise2 Suppose $f'(x) > 0$ in $(a,b)$. Prove that $f$ is strictly
increasing in $(a,b)$, and let $g$ be its inverse function. Prove that
$g$ is differentiable, and that
\begin{equation*}
  g'(f(x))
  = \frac1{f'(x)}
  \quad
  (a < x < b).
\end{equation*}
\begin{proof}
  First, since $f'(x) > 0$, we know by Theorem~5.11 that $f$ is
  monotonically increasing in $(a,b)$. Suppose $f(x) = f(y)$ for
  $a<x<y<b$. By the mean value theorem, there is a $c\in(x,y)$ such
  that $f'(c) = 0$, but this is a contradiction. Therefore $f$ is
  strictly increasing in $(a,b)$.

  Since $f$ is strictly increasing, it is a one-to-one function and
  the inverse $g$ exists. Moreover, since the restriction of $f$ to
  any interval $[c,d]$ such that $a < c < d < b$ is a continuous
  mapping on a compact metric space, the inverse $g$ must also be
  continuous on $f([c,d])$. Since $c$ and $d$ were arbitrary, $g$ must
  be continuous on $(a,b)$.

  Let $\varepsilon > 0$. Then we may choose $\eta > 0$ such that
  $0 < \abs{x - t} < \eta$ implies
  \begin{equation*}
    \Abs{\frac1{f'(x)} - \frac{x - t}{f(x) - f(t)}} < \varepsilon.
  \end{equation*}
  Since $g$ is continuous, we may choose $\delta > 0$ so that
  $0 < \abs{p - q} < \delta$ implies $\abs{g(p) - g(q)} < \eta$. Now
  pick any $p,q\in I$ with $p\neq q$ such that $\abs{p - q} < \delta$,
  and set $x = g(p)$ and $t = g(q)$. Then $0 < \abs{x - t} < \eta$ and
  we have
  \begin{equation*}
    \Abs{\frac1{f'(x)} - \frac{g(p) - g(q)}{p - q}}
    = \Abs{\frac1{f'(x)} - \frac{x - t}{f(x) - f(t)}}
    < \varepsilon.
  \end{equation*}
  It now follows that
  \begin{equation*}
    g'(f(x)) = \lim_{q\to p}\frac{g(p) - g(q)}{p - q}
    = \frac1{f'(x)}. \qedhere
  \end{equation*}
\end{proof}

\Exercise3 Suppose $g$ is a real function on $R^1$, with bounded
derivative (say $\abs{g'} \leq M$). Fix $\varepsilon > 0$, and define
$f(x) = x + \varepsilon g(x)$. Prove that $f$ is one-to-one if
$\varepsilon$ is small enough. (A set of admissible values of
$\varepsilon$ can be determined which depends only on $M$.)
\begin{proof}
  If $0 < \varepsilon < 1/M$, then
  \begin{equation*}
    f'(x) = 1 + \varepsilon g'(x)
    \geq 1 - \varepsilon M > 0.
  \end{equation*}
  By the previous exercise, we know that $f$ is one-to-one.
\end{proof}

\Exercise4 If
\begin{equation*}
  C_0 + \frac{C_1}2 + \cdots + \frac{C_{n-1}}n + \frac{C_n}{n+1} = 0,
\end{equation*}
where $C_0,\dots,C_n$ are real constants, prove that the equation
\begin{equation}
  \label{eq:diff:polynomial-equal-zero}
  C_0 + C_1x + \cdots + C_{n-1}x^{n-1} + C_nx^n = 0
\end{equation}
has at least one real root between $0$ and $1$.
\begin{proof}
  Let $f$ be the function from $R^1$ to $R^1$ given by
  \begin{equation*}
    f(x) = C_0x + \frac{C_1}2x^2 + \cdots
    + \frac{C_{n-1}}nx^n + \frac{C_n}{n+1}x^{n+1}.
  \end{equation*}
  Then
  \begin{equation*}
    f(1) = C_0 + \frac{C_1}2 + \cdots
    + \frac{C_{n-1}}n + \frac{C_n}{n+1} = 0 = f(0)
  \end{equation*}
  and
  \begin{equation*}
    f'(x) = C_0 + C_1x + \cdots + C_{n-1}x^{n-1} + C_nx^n.
  \end{equation*}
  Since $f(0) = f(1)$, we may conclude by the mean value theorem that
  there is an $x\in(0,1)$ such that $f'(x) = 0$. Therefore the
  equation \eqref{eq:diff:polynomial-equal-zero} has a root between
  $0$ and $1$.
\end{proof}

\Exercise5 Suppose $f$ is defined and differentiable for every
$x > 0$, and $f'(x)\to0$ as $x\to+\infty$. Put $g(x) = f(x+1) -
f(x)$. Prove that $g(x)\to0$ as $x\to+\infty$.
\begin{proof}
  Let $\varepsilon > 0$. Since $f'(x)\to0$ as $x\to+\infty$, we can
  find $M > 0$ such that $\abs{f'(x)} < \varepsilon$ for all $x >
  M$. Then for any $x > M$, the mean value theorem guarantees the
  existence of $c\in(x,x+1)$ such that
  \begin{equation*}
    f'(c) = f(x+1) - f(x).
  \end{equation*}
  Then
  \begin{equation*}
    \abs{g(x)} = \abs{f(x+1) - f(x)}
    = \abs{f'(c)} < \varepsilon.
  \end{equation*}
  Therefore $g(x)\to0$ as $x\to+\infty$.
\end{proof}

\Exercise6 Suppose
\begin{enumerate}
\item $f$ is continuous for $x\geq0$,
\item $f'(x)$ exists for $x > 0$,
\item $f(0) = 0$,
\item $f'$ is monotonically increasing.
\end{enumerate}
Put
\begin{equation*}
  g(x) = \frac{f(x)}x \quad(x > 0)
\end{equation*}
and prove that $g$ is monotonically increasing.
\begin{proof}
  Fix $x > 0$. By the mean value theorem, there is a point $c\in(0,x)$
  such that
  \begin{equation*}
    f'(c) = \frac{f(x) - f(0)}{x - 0} = \frac{f(x)}x = g(x).
  \end{equation*}
  Since $f'$ is monotonically increasing, we know $f'(x) \geq f'(c)$,
  so $f'(x) \geq g(x)$. And since $x$ was arbitrary, this result holds
  for all $x > 0$. Then
  \begin{equation*}
    g'(x) = \frac{xf'(x) - f(x)}{x^2}
    = \frac{f'(x) - g(x)}x
    \geq 0,
    \quad\text{for all $x > 0$}.
  \end{equation*}
  Hence $g$ is monotonically increasing by Theorem~5.11.
\end{proof}

\Exercise7 Suppose $f'(x)$, $g'(x)$ exist, $g'(x)\neq0$, and
$f(x) = g(x) = 0$. Prove that
\begin{equation*}
  \lim_{t\to x}\frac{f(t)}{g(t)} = \frac{f'(x)}{g'(x)}.
\end{equation*}
(This holds also for complex functions.)
\begin{proof}
  Since $f$ and $g$ are differentiable at $x$ and $f(x) = g(x) = 0$,
  we have
  \begin{align*}
    \frac{f'(x)}{g'(x)}
    &= \lim_{t\to x}\left(\frac{f(t) - f(x)}{t - x}\right)
      \lim_{t\to x}\left(\frac{g(t) - g(x)}{t - x}\right)^{-1} \\
    &= \lim_{t\to x}\left(\frac{f(t)}{t-x}\right)
      \left(\frac{t-x}{g(t)}\right) \\
    &= \lim_{t\to x}\frac{f(t)}{g(t)}. \qedhere
  \end{align*}
\end{proof}
