\chapter{Continuity}

\Exercise1 Suppose $f$ is a real function defined on $R^1$ which
satisfies
\begin{equation}
  \label{eq:diff-f-x-plus-h-and-f-x-minus-h}
  \lim_{h\to0}[f(x+h)-f(x-h)]=0
\end{equation}
for every $x\in R^1$. Does this imply that $f$ is continuous?
\begin{solution}
  No. Consider the function $f\colon R^1\to R^1$ given by
  \begin{equation*}
    f(x) =
    \begin{cases}
      1, & \text{if $x$ is an integer}, \\
      0, & \text{otherwise}.
    \end{cases}
  \end{equation*}
  This function clearly has infinitely many discontinuities.

  Now fix a particular real number $x$. If $x$ is an integer, then for
  any $\varepsilon > 0$ we may let $\delta = 1/2$, so that for all $h$
  with $0<\abs{h}<\delta$ we have
  \begin{equation*}
    \abs{f(x + h) - f(x - h)} = \abs{0 - 0} = 0 < \varepsilon.
  \end{equation*}
  On the other hand, if $x$ is not an integer, then let $n$ be the
  integer nearest to $x$. For any $\varepsilon > 0$ take
  \begin{equation*}
    \delta = \frac{\abs{x - n}}2.
  \end{equation*}
  Again, for all $h$ with $0<\abs{h}<\delta$ we have
  \begin{equation*}
    \abs{f(x + h) - f(x - h)} = \abs{0 - 0} = 0 < \varepsilon.
  \end{equation*}

  We have shown that the function $f$ satisfies
  \eqref{eq:diff-f-x-plus-h-and-f-x-minus-h} for any $x$ in $R^1$, but
  $f$ is not continuous.
\end{solution}

\Exercise2
\label{exercise:continuity:f-of-closure-is-subset-of-closure-of-f}
If $f$ is a continuous mapping of a metric space $X$ into a metric
space $Y$, prove that
\begin{equation*}
  f(\overline{E}) \subset \overline{f(E)}
\end{equation*}
for every set $E\subset X$. ($\overline{E}$ denotes the closure of
$E$.) Show, by an example, that $f(\overline{E})$ can be a proper
subset of $\overline{f(E)}$.
\begin{proof}
  Suppose $p\in f(\overline{E})$. If $p\in f(E)$ then certainly
  $p\in\overline{f(E)}$ and we are done. So suppose that
  $p\not\in f(E)$. We want to show that $p$ must be a limit point of
  $f(E)$.

  By the choice of $p$ there must be $q\in\overline{E}$ such that
  $p = f(q)$. But if $p\not\in f(E)$ then $q\not\in E$. Therefore $q$
  is a limit point of $E$.

  Take any neighborhood $N$ of $p$ having radius $r>0$. Since $f$ is
  continuous, we may find $\delta>0$ so that for any $x\in X$,
  \begin{equation*}
    d(x,q) < \delta
    \quad\text{implies}\quad
    d(f(x),p)<r.
  \end{equation*}
  And $q$ is a limit point of $E$, so we can certainly find $x\in E$
  such that $d(x,q)<\delta$. Then $f(x)\in f(E)$ by definition, and we
  have $f(x)\neq p$ and $f(x)\in N$. Therefore $p$ is indeed a limit
  point of $f(E)$ and the main proof is complete.

  Finally, to see that $f(\overline{E})$ can be a proper subset of
  $\overline{f(E)}$, consider the continuous function $f\colon R\to R$
  given by
  \begin{equation*}
    f(x) = \frac2{x^2 + 1}.
  \end{equation*}
  If $E = (1,\infty)$ then $f(E) = (0,1)$ so that
  $\overline{f(E)} = [0,1]$. However $\overline{E} = [1,\infty)$ so
  $f(\overline{E}) = (0,1]$. Then
  $f(\overline{E})\subset\overline{f(E)}$ but equality does not hold.
\end{proof}

\Exercise3
\label{exercise:continuity:zero-set-is-closed}
Let $f$ be a continuous real function on a metric space $X$. Let
$Z(f)$ (the {\em zero set} of $f$) be the set of all $p\in X$ at which
$f(p) = 0$. Prove that $Z(f)$ is closed.
\begin{proof}
  Since the set $\{0\}$ is closed in $R^1$ and $f$ is continuous, the
  corollary to Theorem~4.8 guarantees that $f^{-1}(\{0\})$ is closed
  in $X$. But $Z(f) = f^{-1}(\{0\})$ by definition, so $Z(f)$ is
  closed.
\end{proof}

\Exercise4
\label{exercise:continuity:continuous-map-on-dense-subset}
Let $f$ and $g$ be continuous mappings of a metric space $X$ into a
metric space $Y$, and let $E$ be a dense subset of $X$. Prove that
$f(E)$ is dense in $f(X)$. If $g(p) = f(p)$ for all $p\in E$, prove
that $g(p) = f(p)$ for all $p\in X$. (In other words, a continuous
mapping is determined by its values on a dense subset of its domain).
\begin{proof}
  Let $p\in f(X)$. Since $X = \overline{E}$, we have by
  Exercise~\ref{exercise:continuity:f-of-closure-is-subset-of-closure-of-f}
  that $p\in\overline{f(E)}$ so that $p$ is either in $f(E)$ or is a
  limit point of $f(E)$. Either way this shows that $f(E)$ is dense in
  $f(X)$.

  Next, suppose $g(p) = f(p)$ for all $p\in E$ and let $q\in X -
  E$. Since $E$ is dense in $X$, $q$ is a limit point of $E$. Let
  $\varepsilon>0$ be arbitrary. The continuity of $f$ allows us to
  then find $\delta_1>0$ such that, for $x\in X$,
  \begin{equation*}
    d(x,q) < \delta_1
    \quad\text{implies}\quad
    d(f(x),f(q)) < \frac\varepsilon2.
  \end{equation*}
  Similarly, the continuity of $g$ allows us to find $\delta_2>0$ such
  that
  \begin{equation*}
    d(x,q) < \delta_2
    \quad\text{implies}\quad
    d(g(x),g(q)) < \frac\varepsilon2.
  \end{equation*}
  Set $\delta = \min(\delta_1,\delta_2)$.

  Pick $r\in E$ such that $d(q,r) < \delta$ (this is possible since
  $q$ is a limit point of $E$). Since $g(r) = f(r)$, we then have
  \begin{align*}
    d(f(q),g(q)) &\leq d(f(q),f(r)) + d(f(r),g(q)) \\
                 &= d(f(q),f(r)) + d(g(r),g(q)) \\
                 &< \frac\varepsilon2 + \frac\varepsilon2
                   = \varepsilon.
  \end{align*}
  Since $\varepsilon$ was arbitrary, we must have $d(f(q),g(q)) = 0$
  so that $f(q) = g(q)$.
\end{proof}

\Exercise5 If $f$ is a real continuous function defined on a closed
set $E\subset R^1$, prove that there exist continuous real functions
$g$ on $R^1$ such that $g(x) = f(x)$ for all $x\in E$. (Such functions
$g$ are called {\em continuous extensions} of $f$ from $E$ to $R^1$.)
Show that the result becomes false if the word ``closed'' is
omitted. Extend the result to vector-valued functions.
\begin{proof}
  Since $E$ is closed, its complement $E^c$ is open. Since $E^c$ is an
  open set in $R^1$, we have by
  Exercise~\ref{exercise:basic-topology:open-sets-in-R1-union-of-segments}
  that it is the union of an at most countable collection of disjoint
  segments. Let the $n$th segment be $(a_n,b_n)$. Define the function
  $g\colon R^1\to R^1$ as follows.
  \begin{equation*}
    g(x) =
    \begin{cases}
      f(x) & \text{if $x\in E$}, \\
      \frac1{b_n - a_n}\big((b_n - x)f(a_n)
      + (x - a_n)f(b_n)\big) & \text{if $x\in(a_n,b_n)$}.
    \end{cases}
  \end{equation*}
  Note that we are assuming that each segment $(a_n,b_n)$ is
  bounded. If there is a segment of the form $(-\infty,b_n)$, then the
  proof will still work if we define $g(x)$ to be $f(b_n)$ for all $x$
  in this segment, and similarly for the segment $(a_n,\infty)$.

  Now, it is clear that $g$ is continuous on the interior of $E$ as
  well as on $E^c$. We need to show that $g$ is continuous at the
  points $a_n$ and $b_n$ for $n = 1,2,3,\dots$.

  Fix a positive integer $n$. It is clear from the continuity of $f$
  that
  \begin{equation*}
    g(a_n-) = f(a_n)
    \quad\text{and}\quad
    g(b_n+) = f(b_n).
  \end{equation*}
  Checking the limits on the inside, we find
  \begin{equation*}
    g(a_n+) = f(a_n) + 0f(b_n) = f(a_n),
  \end{equation*}
  and
  \begin{equation*}
    g(b_n-) = 0f(a_n) + f(b_n) = f(b_n).
  \end{equation*}
  So
  \begin{equation*}
    \lim_{t\to a_n}g(t) = f(a_n) = g(a_n)
    \quad\text{and}\quad
    \lim_{t\to b_n}g(t) = f(b_n) = g(b_n),
  \end{equation*}
  which shows that $g$ is continuous at $a_n$ and $b_n$. It now
  follows that $g$ is continuous on all of $R^1$.

  To see that this result is not necessarily true if $E$ is not
  closed, consider the function $f\colon E\to R^1$, where
  $E = R^1 - \{0\}$, given by
  \begin{equation*}
    f(x) = \frac1x.
  \end{equation*}
  Then there is no way to define a function $g$ so that $g(x) = f(x)$
  on $E$ with $g$ being continuous at $0$, since the left- and
  right-handed limits at $0$ are not affected by the value of $g(0)$.

  If $\vec{f}$ is vector-valued, then the same result (with
  essentially the same proof) holds if we define $g\colon R^1\to R^k$
  by
  \begin{equation*}
    \vec{g}(x) =
    \begin{cases}
      \vec{f}(x) & \text{if $x\in E$}, \\
      \frac1{b_n - a_n}\big((b_n - x)\vec{f}(a_n)
      + (x - a_n)\vec{f}(b_n)\big) & \text{if $x\in(a_n,b_n)$},
    \end{cases}
  \end{equation*}
  the only difference being that the values of $f$ and $g$ are in
  $R^k$ rather than $R^1$.
\end{proof}

\Exercise6 If $f$ is defined on $E$, the {\em graph} of $f$ is the set
of points $(x,f(x))$, for $x\in E$. In particular, if $E$ is a set of
real numbers, and $f$ is real-valued, the graph of $f$ is a subset of
the plane.

Suppose $E$ is compact, and prove that $f$ is continuous on $E$ if and
only if its graph is compact.
\begin{proof}
  Let $E\subset X$ and $f\colon E\to Y$, where $X$ and $Y$ are metric
  spaces. Let $G\subset X\times Y$ be the graph of $f$ and let
  $g\colon E\to X\times Y$ be given by $g(x) = (x,f(x))$, so that
  $g(E) = G$.

  Define the metric $d\colon(X\times Y)^2\to R$ by
  \begin{equation*}
    d((x_1,y_1), (x_2,y_2)) = d_X(x_1,x_2) + d_Y(y_1,y_2).
  \end{equation*}
  It is easy to check that $d$ is indeed a metric, so that $X\times Y$
  becomes a metric space.

  First, suppose $f$ is continuous. We show that $g$ is then
  continuous also. Fix a point $x\in E$. For any $\varepsilon > 0$,
  let $\delta_0>0$ be such that $d_Y(f(p),f(x)) < \varepsilon/2$
  whenever $d_X(p,x) < \delta_0$. Now put
  \begin{equation*}
    \delta = \min\left\{\delta_0, \frac\varepsilon2\right\}.
  \end{equation*}
  Then $d_X(p,x) < \delta$ implies
  \begin{align*}
    d(g(p),g(x))
    &= d((p,f(p)), (x,f(x))) \\
    &= d_X(p,x) + d_Y(f(p),f(x)) \\
    &< \frac\varepsilon2 + \frac\varepsilon2 = \varepsilon.
  \end{align*}
  Therefore $g$ is continuous on $E$. The compactness of $G = g(E)$
  now follows from Theorem~4.14.

  Conversely, suppose $G$ is compact, and assume that $f$ is not
  continuous, say at a point $x\in E$. Set $\delta_n = 1/n$ for
  positive integers $n$. Since $f$ is not continuous at $x$, there is
  an $\varepsilon > 0$ such that for each $\delta_n$, we can pick an
  $x_n$ so that $d_X(x_n,x) < \delta_n$ and
  \begin{equation}
    \label{eq:continuity:d-f-greater-than-epsilon}
    d_Y(f(x_n),f(x))\geq\varepsilon.
  \end{equation}

  Since $G$ is compact, the sequence $\{(x_n,f(x_n))\}$ must have a
  subsequence $\{(x_{n_k},f(x_{n_k}))\}$ that converges to a point
  $(y, f(y))\in G$. Then $x_{n_k}\to y$. But $x_n\to x$, so all
  subsequences converge to $x$ also. Therefore $y = x$, and the
  subsequence $\{f(x_{n_k})\}$ converges to $f(x)$. But this is
  impossible since, by \eqref{eq:continuity:d-f-greater-than-epsilon},
  we know that $d_Y(f(x_{n_k}),f(x))\geq\varepsilon$. Therefore $f$
  must be continuous at $x$. And $x\in E$ was arbitrary, so $f$ is
  continuous on $E$ and the proof is complete.
\end{proof}

\Exercise7 If $E\subset X$ and if $f$ is a function defined on $X$,
the {\em restriction} of $f$ to $E$ is the function $g$ whose domain
of definition is $E$, such that $g(p) = f(p)$ for $p\in E$. Define $f$
and $g$ on $R^2$ by $f(0,0) = g(0,0) = 0$,
$f(x,y) = xy^2/(x^2 + y^4)$, $g(x,y) = xy^2/(x^2 + y^6)$ if
$(x,y)\neq(0,0)$. Prove that $f$ is bounded on $R^2$, that $g$ is
unbounded in every neighborhood of $(0,0)$, and that $f$ is not
continuous at $(0,0)$; nevertheless, the restrictions of both $f$ and
$g$ to every straight line in $R^2$ are continuous!
\begin{proof}
  For all $(x,y)\in R^2$, we have
  \begin{equation*}
    0\leq(\abs{x}-y^2)^2 = x^2 - 2\abs{x}y^2 + y^4,
  \end{equation*}
  which implies that $\abs{xy^2}\leq(x^2 + y^4)/2$. So, when $x$ and
  $y$ are not both zero,
  \begin{equation*}
    \abs{f(x,y)} = \frac{\abs{xy^2}}{x^2+y^4}
    \leq \frac12.
  \end{equation*}
  So $f$ is bounded on $R^2$.

  Next, note that if $(x,y)\in R^2$ is such that $x = y^3$ and
  $x,y\neq0$, then
  \begin{equation*}
    g(x,y) = \frac{y^3(y^2)}{(y^3)^2 + y^6}
    = \frac{y^5}{2y^6} = \frac1{2y}.
  \end{equation*}
  So, by choosing $y > 0$ small enough, we can always find a point
  $(y^3,y)$ in any neighborhood of $(0,0)$ such that $g(y^3,y)$ is
  arbitrarily large. This shows that $g$ is unbounded in every
  neighborhood of $(0,0)$.

  To show that $f$ is not continuous at $(0,0)$, note that in every
  neighborhood of $(0,0)$, we can find a point $(x,y)$ such that
  $x = y^2$, so that if $x$ and $y$ are not both zero,
  \begin{equation*}
    f(x,y) = \frac{y^2(y^2)}{(y^2)^2 + y^4} = \frac12.
  \end{equation*}
  Therefore, by choosing $\varepsilon < \frac12$, there is no
  neighborhood of $(0,0)$ such that
  $\abs{f(x,y) - f(0,0)} < \varepsilon$ for all $(x,y)$ in the
  neighborhood. This shows that $f$ is not continuous.

  Finally, we consider restrictions of $f$ and $g$ to straight
  lines. Certainly $f$ and $g$ are continuous everywhere except
  $(0,0)$. So we only need to consider restrictions to straight lines
  which pass through $(0,0)$. Such lines have the form $ax + by =
  0$. Fix any $a,b\in R$ and let $f^*$ and $g^*$ be the restrictions
  of $f$ and $g$, respectively, to the line $ax + by = 0$.

  If $b = 0$ then $x = 0$ for all $y$ and we have
  $f^*(0,y) = g^*(0,y) = 0$ for all $(x,y)$ on this line so both
  functions are continuous. On the other hand, if $b\neq0$, then
  $y = -(a/b)x$ and we get
  \begin{equation*}
    f^*(x,-ax/b)
    = \frac{(a^2/b^2)x^3}{x^2 + (a^4/b^4)x^4}
    = \frac{(ab)^2x}{b^4 + a^4x^2},
  \end{equation*}
  and, similarly,
  \begin{equation*}
    g^*(x,-ax/b)
    = \frac{(a^2/b^2)x^3}{x^2 + (a^6/b^6)x^6}
    = \frac{a^2b^4x}{b^6 + a^6x^4}.
  \end{equation*}
  Since the denominators of $f^*$ and $g^*$ are never zero, we
  conclude that both functions are continuous.
\end{proof}

\Exercise8 Let $f$ be a real uniformly continuous function on the
bounded set $E$ in $R^1$. Prove that $f$ is bounded on $E$.

Show that the conclusion is false if boundedness of $E$ is omitted
from the hypothesis.
\begin{proof}
  Let $E$ and $f$ be as stated. Since $E$ is bounded, it is contained
  within some bounded interval $[a,b]$. And since $f$ is uniformly
  continuous on $E$, we may choose $\delta > 0$ so that
  $\abs{f(x) - f(y)} < 1$ whenever $\abs{x - y} < \delta$, for all
  $x,y\in E$. Pick any positive integer $N$ larger than $(b-a)/\delta$
  and define the $N+1$ points $t_0,t_1,\dots,t_N$ by
  \begin{equation*}
    t_i = a + \frac{(b-a)i}N
    \quad\text{for $i = 0, 1, \dots, N$}.
  \end{equation*}
  For each $i$ with $1\leq i\leq N$, define the interval
  $J_i = [t_{i-1},t_i]$ and, if $J_i\cap E$ is nonempty, pick
  $x_i\in J_i\cap E$. Then let
  \begin{equation*}
    M = \max\limits_i\{\abs{f(x_i)}\} + 1.
  \end{equation*}

  Now, for any $x\in E$, $x$ belongs to some $J_i$, so
  \begin{equation*}
    \abs{x - x_i} \leq \frac{b-a}N < \delta,
  \end{equation*}
  which implies that $\abs{f(x) - f(x_i)} < 1$. Therefore
  $\abs{f(x)}\leq M$ and $f$ is bounded.

  Note that the boundedness of $E$ was necessary, since otherwise the
  identity function on $R^1$ would serve as a counterexample.
\end{proof}

\Exercise9
\label{exercise:continuity:diam-characterization-of-uniform}
Show that the requirement in the definition of uniform continuity can
be restated as follows, in terms of diameters of sets: To every
$\varepsilon > 0$ there exists a $\delta > 0$ such that
$\diam f(E) < \varepsilon$ for all $E\subset X$ with
$\diam E < \delta$.
\begin{proof}
  By definition, $\diam E < \delta$ if and only if $d(x,y) < \delta$
  for all $x,y\in E$, and $\diam f(E) < \varepsilon$ if and only if
  $d(f(x),f(y)) < \varepsilon$ for all $x,y\in E$.

  If $f\colon X\to Y$ is uniformly continuous, then for all
  $\varepsilon > 0$ there is $\delta > 0$ so that $d(x,y) < \delta$
  implies $d(f(x),f(y)) < \varepsilon$. If $E\subset X$ is any subset
  such that $\diam E < \delta$, then $d(x,y) < \delta$ for all
  $x,y\in E$ so $d(f(x),f(y)) < \varepsilon$ which shows that
  $\diam f(E) < \varepsilon$.

  Conversely, suppose $f$ is such that to every $\varepsilon > 0$
  there is $\delta > 0$ so that $\diam E < \delta$ implies
  $\diam f(E) < \varepsilon$. Given any $\varepsilon > 0$, choose such
  a $\delta > 0$. For any $x,y\in X$ with $d(x,y) < \delta$, define
  $E = \{x,y\}$ so that $\diam E < \delta$. Then
  $\diam f(E) < \varepsilon$ which means $d(f(x),f(y)) < \varepsilon$
  as required.
\end{proof}

\Exercise{10} Complete the details of the following alternative proof
of Theorem~4.19: If $f$ is not uniformly continuous, then for some
$\varepsilon > 0$ there are sequences $\{p_n\}$, $\{q_n\}$ in $X$ such
that $d_X(p_n,q_n) \to 0$ but $d_Y(f(p_n), f(q_n)) > \varepsilon$. Use
Theorem~2.37 to obtain a contradiction.
\begin{thm}[4.19]
  Let $f$ be a continuous mapping of a compact metric space $X$ into a
  metric space $Y$. Then $f$ is uniformly continuous on $X$.
\end{thm}
\begin{proof}
  Put $\delta_n = 1/n$. If $f$ is not uniformly continuous, then for
  some $\varepsilon > 0$ there are points $p_n$ and $q_n$ with
  $d_X(p_n,q_n) < \delta_n$ but $d_Y(f(p_n),f(q_n))\geq\varepsilon$
  for all $n$. Then $\{p_n\}$ and $\{q_n\}$ are sequences in
  $X$. Since $X$ is compact, there is some subsequence $\{p_{n_k}\}$
  and some subsequence $\{q_{n_k}\}$ such that $p_{n_k}\to p$ and
  $q_{n_k}\to q$ for some $p,q\in X$.

  Since $d_X(p_n,q_n)\to 0$, we must have $p = q$. Since $f$ is
  continuous, we also have $f(p_{n_k}) \to f(p)$ and
  $f(q_{n_k}) \to f(q)$. Choose $\delta_1$ so that
  $d(f(p_{n_k}),f(p)) < \varepsilon/2$ for all $k \geq N_1$ and choose
  $\delta_2$ so that $d(f(q_{n_k}),f(q)) < \varepsilon/2$ for all
  $k \geq N_2$. Then for all $k\geq\max\{N_1,N_2\}$, we have
  \begin{equation*}
    d(f(p_{n_k}), f(q_{n_k}))
    \leq d(f(p_{n_k}), f(p)) + d(f(p), f(q_{n_k}))
    < \frac\varepsilon2 + \frac\varepsilon2 = \varepsilon.
  \end{equation*}
  This contradicts our earlier assertion. Therefore $f$ must be
  uniformly continuous on $X$.
\end{proof}

\Exercise{11}
\label{exercise:continuity:unif-cont-cauchy-seq}
Suppose $f$ is a uniformly continuous mapping of a metric space $X$
into a metric space $Y$ and prove that $\{f(x_n)\}$ is a Cauchy
sequence in $Y$ for every Cauchy sequence $\{x_n\}$ in $X$. Use this
result to give an alternative proof of the theorem stated in
Exercise~13.
\begin{proof}
  Fix any $\varepsilon > 0$ and let $\{x_n\}$ be a Cauchy sequence in
  $X$. Since $f$ is uniformly continuous, there is a $\delta > 0$ such
  that
  \begin{equation}
    \label{eq:continuity:f-unif-cont}
    d(f(x),f(y)) < \varepsilon
    \quad\text{whenever}\quad
    d(x,y) < \delta.
  \end{equation}
  Since $\{x_n\}$ is Cauchy, we can find a positive integer $N$ such
  that $d(x_m,x_n) < \delta$ whenever $m,n\geq N$. Then, by
  \eqref{eq:continuity:f-unif-cont}, we have
  $d(f(x_m),f(x_n)) < \varepsilon$ for all $m,n\geq N$, and we see
  that the sequence $\{f(x_n)\}$ is Cauchy in $Y$.

  Now, let $E$ be a dense subset of $X$ and suppose $f\colon E\to R^1$
  is uniformly continuous. We want to show that $f$ has a continuous
  extension from $E$ to $X$. Pick any point $p\in X$. Then either
  $p\in E$ or $p$ is a limit point of $E$. If the former, define
  $g(p) = f(p)$.

  If $p$ is a limit point, then there is a sequence $\{p_n\}$ in $E$
  that converges to $p$. Since every convergent sequence in a metric
  space is Cauchy, $\{p_n\}$ is a Cauchy sequence, so our previous
  result guarantees that $\{f(p_n)\}$ is also Cauchy, and hence
  converges to a point $q$ in $R^1$. Define $g(p) = q$ in this
  case. It is then easy to check that $g$ is a continuous function
  from $X$ to $R^1$.
\end{proof}

\Exercise{12}
\label{exercise:continuity:composition-unif-cont}
A uniformly continuous function of a uniformly continuous function is
uniformly continuous.

State this more precisely and prove it.
\begin{solution}
  Let $X,Y,Z$ be metric spaces, let $f\colon X\to Y$ and
  $g\colon f(X)\to Z$ be uniformly continuous functions. Then the
  composite function $g\circ f$ is uniformly continuous.

  To prove this, let $\varepsilon > 0$. By the uniform continuity of
  $g$, there is $\eta > 0$ such that $d(g(p),g(q)) < \varepsilon$
  whenever $d(p,q) < \eta$, for any $p,q\in f(X)$. Also, by the
  uniform continuity of $f$, we can find $\delta > 0$ such that
  $d(f(s),f(t)) < \eta$ for any $s,t\in X$ such that
  $d(s,t) < \delta$.

  Combining these two results, we have the following: given any
  $x,y\in X$ with $d(x,y) < \delta$, we have
  \begin{equation*}
    d(g(f(x)), g(f(y))) < \varepsilon.
  \end{equation*}
  Therefore $g\circ f$ is uniformly continuous.
\end{solution}

\Exercise{13} Let $E$ be a dense subset of a metric space $X$, and let
$f$ be a uniformly continuous {\em real} function defined on
$E$. Prove that $f$ has a continuous extension from $E$ to
$X$. (Uniqueness follows from
Exercise~\ref{exercise:continuity:continuous-map-on-dense-subset}.)

Could the range space $R^1$ be replaced by $R^k$? By any compact
metric space? By any complete metric space? By any metric space?
\begin{solution}
  Let $f\colon E\to R$ be uniformly continuous, where $E$ is dense in
  $X$. For each point $p$ of $X$ and each positive integer $n$, define
  $V_n(p)$ to be the set of all $q\in E$ with $d(p,q) < 1/n$. Define
  the set
  \begin{equation*}
    F(p) = \bigcap_{n=1}^\infty \overline{f(V_n(p))}.
  \end{equation*}
  Then $F(p)$ is the intersection of a nested set of closed and bounded
  (and hence compact) subsets of $R^1$, so we know by the Corollary to
  Theorem~2.36 that $F(p)$ is nonempty.

  Since $f$ is uniformly continuous and since $\diam V_n(p)\to 0$, we
  know by
  Exercise~\ref{exercise:continuity:diam-characterization-of-uniform}
  that $\diam f(V_n(p))\to 0$ also. Then by Theorem~3.10~(b), we know
  $F(p)$ consists of exactly one point. Call this point $g(p)$. Note
  that if $p\in E$, then $g(p) = f(p)$.

  To complete the proof, we must show that the function $g$ is
  continuous. Let $\varepsilon > 0$. By the uniform continuity of $f$,
  we can find $\delta > 0$ so that
  \begin{equation*}
    \abs{f(p) - f(q)} < \frac\varepsilon3
    \quad\text{for all $p,q\in E$ with $d(p,q) < \delta$}.
  \end{equation*}

  Now let $x,y\in X$ with $d(x,y) < \delta$. Choose $p\in E$ such that
  \begin{equation*}
    d(x,p) < \frac{\delta - d(x,y)}2
    \quad\text{and}\quad
    \abs{f(p) - g(x)} < \frac\varepsilon3
  \end{equation*}
  (this is possible by our construction above). Similarly, choose
  $q\in E$ such that
  \begin{equation*}
    d(y,q) < \frac{\delta - d(x,y)}2
    \quad\text{and}\quad
    \abs{f(q) - g(y)} < \frac\varepsilon3.
  \end{equation*}
  Then
  \begin{align*}
    d(p,q)
    &\leq d(p,x) + d(x,y) + d(y,q) \\
    &< \frac{\delta - d(x,y)}2 + d(x,y) + \frac{\delta - d(x,y)}2 \\
    &= \delta,
  \end{align*}
  so
  \begin{align*}
    \abs{g(x) - g(y)}
    &\leq \abs{g(x) - f(p)} + \abs{f(p) - f(q)} + \abs{f(q) - g(y)} \\
    &< \frac\varepsilon3 + \frac\varepsilon3 + \frac\varepsilon3 \\
    &= \varepsilon.
  \end{align*}
  So $g$ is uniformly continuous on $X$.

  This proof relied on the property that closed and bounded subsets of
  $R^1$ are compact. The same proof would work in $R^k$ as well as any
  compact metric space. In fact, this result holds in any complete
  metric space, as we can see from the proof in
  Exercise~\ref{exercise:continuity:unif-cont-cauchy-seq}.

  Completeness is necessary, however: Let $X$ be any metric space that
  is not complete (for a concrete example, we could take the rationals
  $Q$). Take the identity function $f\colon X\to X$ given by
  $f(p) = p$. $f$ is certainly uniformly continuous. If $X^*$ is the
  completion of $X$ (see
  Exercise~\ref{exercise:sequences:completion}), then there is no
  continuous extension of $f$ from $X$ to $X^*$ (having the same
  codomain $X$). For, if there is such an extension, let it be
  $g\colon X^*\to X$. Now let $h\colon X^*\to X^*$ be the identity
  function on $X^*$. Then $h$ is also a continuous extension of $f$,
  but with a codomain of $X^*$ instead of $X$. So we have found two
  different continuous extensions of $f$ to $X^*$, and this
  contradicts what we know from
  Exercise~\ref{exercise:continuity:continuous-map-on-dense-subset}.
\end{solution}

\Exercise{14} Let $I = [0,1]$ be the closed unit interval. Suppose $f$
is a continuous mapping of $I$ into $I$. Prove that $f(x) = x$ for at
least one $x\in I$.
\begin{proof}
  Define $g\colon[0,1]\to R$ by $g(x) = f(x) - x$. Then $g$ is clearly
  continuous. If $g(0) = 0$ or $g(1) = 0$ then we are done, so suppose
  $g(0)$ and $g(1)$ are both nonzero. Then $g(0) > 0$ and $g(1) < 0$,
  so by Theorem~2.43, there is a point $c$ in $(0,1)$ such that
  $g(c) = 0$. Then $f(c) = c$ as required.
\end{proof}

\Exercise{15} Call a mapping of $X$ into $Y$ {\em open} if $f(V)$ is
an open set in $Y$ whenever $V$ is an open set in $X$.

Prove that every continuous open mapping of $R^1$ into $R^1$ is
monotonic.
\begin{proof}
  Suppose $f$ is a continuous mapping from $R^1$ into $R^1$ that is
  not monotonic. We will show that $f$ cannot be open. Because $f$ is
  not monotonic, we may choose points $a,b,c\in R^1$ with $a < b < c$
  such that
  \begin{equation*}
    f(a) < f(b)
    \quad\text{and}\quad
    f(b) > f(c)
  \end{equation*}
  (the inequalities could be reversed, but then we could just consider
  the function $-f$, so there is no loss of generality). Now $[a,c]$
  is a closed bounded set in $R^1$, hence it is compact. By the
  continuity of $f$ and by Theorem~4.16, we know that $f$ attains a
  maximum value at a point $x\in(a,c)$.

  Now consider the set $f(I)$ where $I$ is the segment $(a,c)$. $I$ is
  clearly open. However, $f(I)$ cannot be open, for $f(x)$ is not an
  interior point of $f(I)$ ($f(x)$ is the supremum of the set, so any
  neighborhood of $f(x)$ must contain points outside of
  $f(I)$). Therefore $f$ is not an open map. The result now follows by
  the contrapositive.
\end{proof}

\Exercise{16} Let $[x]$ denote the largest integer contained in $x$,
that is, $[x]$ is the integer such that $x - 1<[x]\leq x$; and let
$(x) = x - [x]$ denote the fractional part of $x$. What
discontinuities do the functions $[x]$ and $(x)$ have?
\begin{solution}
  Clearly both functions are discontinuous at all integer values of
  $x$ and continuous everywhere else. If $n$ is an integer, then
  $[n-] = n - 1$ and $[n+] = n$, so all discontinuities of $[x]$ are
  simple discontinuities. Similarly, $(n-) = 1$ and $(n+) = 0$, and so
  $(x)$ also has only simple discontinuities.
\end{solution}

\Exercise{17} Let $f$ be a real function defined on $(a,b)$ Prove that
the set of points at which $f$ has a simple discontinuity is at most
countable.
\begin{proof}
  Let $E$ be the set of points $x$ such that $f(x-) < f(x+)$ and fix
  any $x\in E$. Since the rationals are dense in $R^1$, we can choose
  a rational $p$ with $f(x-) < p < f(x+)$. Now since $f(x-)$ exists
  and is less than $p$, we may take $\varepsilon = p - f(x-)$ and
  choose $\delta > 0$ so that $f(t) < p$ whenever
  $t\in(x - \delta, x)$. We may find a rational number $q$ with
  $x - \delta < q < x$, so that $f(t) < p$ for all
  $t\in(q,x)$. Similarly, we may find a rational number $r > x$ with
  $f(t) > p$ for all $t\in(x,r)$. Then $x$ is described by the ordered
  triple $(p,q,r)$ of rational numbers.

  Now suppose $x$ and $y$ are members of $E$ that are described by the
  same triple $(p,q,r)$. Since $f(t) < p$ for all $t\in(q,x)$, we must
  have $y\geq x$ since otherwise $f(y+) > p$ would be a
  contradiction. Similarly, since $f(t) > p$ for all $t\in(x,r)$, we
  must have $y\leq x$. It follows that $y = x$ so that the two
  discontinuities are actually the same. Therefore every triple
  $(p,q,r)$ corresponds to at most one member of $E$. Since the set of
  triples of rational numbers is countable, we know that $E$ is at
  most countable.

  By defining the function $g$ on $(a,b)$ by $g(x) = -f(x)$, we see
  that any simple discontinuity of $f$ such that $f(x-) > f(x+)$ must
  give $g(x-) < g(x+)$ so that the above result shows that such
  discontinuities are also countable.

  The last type of simple discontinuity we have to consider is where
  $f(x-) = f(x+)$, so that $f(x)\neq f(x-)$. If $E$ is the set of such
  discontinuities, then we may use the same ordered triple to describe
  $E$, except that we may choose $p$ to be between $f(x-)$ and $f(x)$,
  with $q$ and $r$ such that either $f(t) < f(x)$ for all
  $t\in(q,x)\cup(x,r)$ or $f(t) > f(x)$ for all
  $t\in(q,x)\cup(x,r)$. Again, we find that each triple corresponds to
  at most one member of $E$, so the set is at most countable.

  Combining these results, we see that the set of all simple
  discontinuities of $f$ is at most countable.
\end{proof}

\Exercise{18} Every rational $x$ can be written in the form $x = m/n$,
where $n > 0$, and $m$ and $n$ are integers without any common
divisors. When $x = 0$, we take $n = 1$. Consider the function $f$
defined on $R^1$ by
\begin{equation*}
  f(x) =
  \begin{cases}
    0 & \text{($x$ irrational)}, \\[3pt]
    \dfrac1n & \left(x = \dfrac{m}n\right).
  \end{cases}
\end{equation*}
Prove that $f$ is continuous at every irrational point, and that $f$
has a simple discontinuity at every rational point.
\begin{proof}
  Choose any $\varepsilon > 0$. First, let $x$ be any irrational
  number. We can find a positive integer $N$ such that
  $1/N < \varepsilon$. Now for each positive integer $n\leq N$, take
  the largest integer $k_n$ that is less than $nx$. Then we have
  \begin{equation*}
    \frac{k_n}n < x < \frac{k_n+1}n,
    \quad n = 1, 2, \dots, N.
  \end{equation*}

  Now for each positive $n\leq N$, set
  \begin{equation*}
    \delta_n
    = \min\left\{\Abs{x - \frac{k_n}n}, \Abs{x - \frac{k_n+1}n}\right\},
  \end{equation*}
  and put
  \begin{equation*}
    \delta = \min_{1\leq i\leq N}\{\delta_i\}.
  \end{equation*}
  Then for any rational $y = p/q$ (in lowest terms) such that
  $\abs{x - y} < \delta$, we must have $q > N$ so that
  \begin{equation*}
    \abs{f(y) - f(x)} = \frac1q < \varepsilon.
  \end{equation*}
  On the other hand, if $y$ is irrational, then
  $\abs{f(y) - f(x)} = 0 < \varepsilon$. This shows that $f$ is
  continuous at any irrational $x$.

  Now if $x$ is rational, let it be written $x = p/q$ in lowest terms,
  so that $f(x) = 1/q$. We can perform the same construction as
  before, except that we now have the possibility that $nx$ is an
  integer, so we want to only choose $n$ such that $q < n \leq N$,
  where $N$ is chosen to be at least as large as $q+1$. Then the same
  proof as before will show that
  \begin{equation*}
    \lim_{y\to x}f(y) = 0 \neq f(x).
  \end{equation*}
  So $f$ is not continuous at each rational $x$, but the limit does
  exist, so these discontinuities are all simple.
\end{proof}

\Exercise{19} Suppose $f$ is a real function with domain $R^1$ which
has the intermediate value property: If $f(a) < c < f(b)$, then
$f(x) = c$ for some $x$ between $a$ and $b$.

Suppose also, for every rational $r$, that the set of all $x$ with
$f(x) = r$ is closed.

Prove that $f$ is continuous.
\begin{proof}
  Suppose to the contrary that $f$ is not continuous, say at the point
  $x_0$. Then for some $\varepsilon > 0$ we may find a sequence of
  points $\{x_n\}$ which converges to $x_0$ but such that
  $f(x_n) - f(x_0) \geq \varepsilon$ for all $n$ (if this is not
  possible, then there is a sequence with
  $f(x_0) - f(x_n) \geq \varepsilon$ and a similar argument will
  work). Choose a rational number
  $r\in(f(x_0), f(x_0) + \varepsilon)$.

  Then for each $n$, $r$ is between $f(x_0)$ and $f(x_n)$. Since $f$
  has the intermediate value property, we may find $t_n$ between $x_0$
  and $x_n$ such that $f(t_n) = r$. Since $x_n\to x_0$ we also have
  $t_n\to x_0$. This shows that $x_0$ is a limit point of the set of
  all $t$ such that $f(t) = r$. But $f(x_0)\neq r$, so this
  contradicts the fact that the set is closed. Therefore $f$ must be
  continuous.
\end{proof}

\Exercise{20}
\label{exercise:continuity:point-to-set-distance}
If $E$ is a nonempty subset of a metric space $X$, define the distance
from $x\in X$ to $E$ by
\begin{equation*}
  \rho_E(x) = \inf_{z\in E} d(x,z).
\end{equation*}
\begin{enumerate}
\item Prove that $\rho_E(x) = 0$ if and only if $x\in\overline{E}$.
  \begin{proof}
    Suppose $\rho_E(x) = 0$. If $x\in E$ then certainly
    $x\in\overline{E}$, so suppose $x\not\in E$. Then there is a
    $z_n\in E$ such that $d(x,z_n) < 1/n$ for each positive integer
    $n$. Therefore $x$ is a limit point of $E$ so $x\in\overline{E}$.

    Conversely, if $x\in\overline{E}$ then either $x\in E$ or $x$ is a
    limit point of $E$. If $x\in E$ then certainly $\rho_E(x) = 0$. If
    $x$ is a limit point, then we can find a sequence $\{z_n\}$ of
    points in $E$ with $z_n\to x$. This implies that $d(x,z_n)\to0$,
    so $\rho_E(x) = 0$ in this case also.
  \end{proof}
\item Prove that $\rho_E$ is a uniformly continuous function on $X$,
  by showing that
  \begin{equation*}
    \abs{\rho_E(x) - \rho_E(y)} \leq d(x,y)
  \end{equation*}
  for all $x\in X$, $y\in X$.
  \begin{proof}
    Let $z$ be any point in $E$. Then
    \begin{equation*}
      \rho_E(x) \leq d(x,z) \leq d(x,y) + d(y,z).
    \end{equation*}
    This holds for all $z\in E$, and by taking the infimum over $z$,
    the inequality becomes
    \begin{equation*}
      \rho_E(x) \leq d(x,y) + \rho_E(y).
    \end{equation*}
    Therefore
    \begin{equation*}
      \rho_E(x) - \rho_E(y) \leq d(x,y).
    \end{equation*}
    In a similar way, we can show that
    \begin{equation*}
      \rho_E(y) - \rho_E(x) \leq d(y,x) = d(x,y).
    \end{equation*}
    Therefore
    \begin{equation*}
      \abs{\rho_E(x) - \rho_E(y)} \leq d(x,y)
      \quad\text{for all $x,y\in X$}.
    \end{equation*}
    This shows that $\rho_E$ is uniformly continuous on $X$.
  \end{proof}
\end{enumerate}

\Exercise{21}
\label{exercise:continuity:K-F-disjoint-delta}
Suppose $K$ and $F$ are disjoint sets in a metric space $X$, $K$ is
compact, $F$ is closed. Prove that there exists $\delta > 0$ such that
$d(p,q) > \delta$ if $p\in K$, $q\in F$.

Show that the conclusion may fail for two disjoint closed sets if
neither is compact.
\begin{proof}
  If $\rho_F(p) = 0$ for some $p\in K$, we know by the previous
  exercise (Exercise~\ref{exercise:continuity:point-to-set-distance})
  that $p\in\overline{F}$. But $F$ is closed, so $F = \overline{F}$
  and we would have $p\in K\cap F$, which contradicts the fact that
  the sets are disjoint. So $\rho_F(p)$ is strictly positive.

  Since $\rho_F$ is a continuous function on the compact metric space
  $K$, we also know by Theorem~4.16 that $\rho_F$ attains a minimum
  value on $K$. Thus we can find a $\delta > 0$ such that
  $\rho_F(p)>\delta$ for all $p\in K$. Restated, this means that
  $d(p,q) > \delta$ for all $p\in K$ and $q\in F$.

  If $F$ and $K$ are closed but not compact, the conclusion may
  fail. Take for example the closed sets in $R^2$ given by
  \begin{equation*}
    F = \{(x,0)\in R^2\mid x\in R\}
    \quad\text{and}\quad
    K = \{(x,y)\in R^2\mid y = 1/(1 + x^2)\}.
  \end{equation*}
  Then $\rho_F(p)$ is still positive for all $p\in K$, but for any
  $\delta > 0$ we can always find a point $p$ in $K$ and $q$ in $F$
  with $d(p,q) < \delta$.
\end{proof}

\Exercise{22} Let $A$ and $B$ be disjoint nonempty closed sets in a
metric space $X$, and define
\begin{equation*}
  f(p) = \frac{\rho_A(p)}{\rho_A(p) + \rho_B(p)}
  \quad (p\in X).
\end{equation*}
Show that $f$ is a continuous function on $X$ whose range lies in
$[0,1]$, that $f(p) = 0$ precisely on $A$ and $f(p) = 1$ precisely on
$B$. This establishes a converse of
Exercise~\ref{exercise:continuity:zero-set-is-closed}: Every closed
set $A\subset X$ is $Z(f)$ for some continuous real $f$ on
$X$. Setting
\begin{equation*}
  V = f^{-1}\left(\left[0, \tfrac12\right)\right),
  \quad W = f^{-1}\left(\left(\tfrac12, 1\right]\right),
\end{equation*}
show that $V$ and $W$ are open and disjoint, and that
$A\subset V, B\subset W$. (Thus pairs of disjoint closed sets in a
metric space can be covered by pairs of disjoint open sets. This
property of metric spaces is called {\em normality}.)
\begin{proof}
  We have already seen in
  Exercise~\ref{exercise:continuity:point-to-set-distance} that
  $\rho_A$ and $\rho_B$ are continuous. The continuity of $f$ then
  follows from Theorem~4.4 (note that the denominator is nonzero since
  $\rho_A(p)$ and $\rho_B(p)$ cannot be simultaneously zero).

  We also know that, since $A$ and $B$ are closed, $\rho_A(p) = 0$ if
  and only if $p\in A$, and $\rho_B(p) = 0$ if and only if $p\in
  B$. This implies that $f(p) = 0$ if and only if $p\in A$ and
  $f(p) = 1$ if and only if $p\in B$, and that $f(X)$ lies within the
  interval $[0,1]$.

  Now let $V$ and $W$ be as described above. Take any point $p\in
  V$. Suppose $\rho_A(p) = r < \frac12$. Then if we choose any
  positive $\delta < \frac12 - r$, we see that the
  $\delta$-neighborhood of $p$ is entirely contained within
  $V$. Therefore $V$ is open, and certainly $A\subset V$. In an
  entirely similar way we can show that $W$ is open and that
  $B\subset W$. Lastly, $V$ and $W$ must be disjoint since they are
  preimages of disjoint sets under the same function.
\end{proof}

% \Exercise{23} A real-valued function $f$ defined in $(a,b)$ is said to
% be {\em convex} if
% \begin{equation}
%   \label{eq:continuity:convex-def}
%   f(\lambda x + (1 - \lambda)y)
%   \leq \lambda f(x) + (1 - \lambda)f(y)
% \end{equation}
% whenever $a < x < b$, $a < y < b$, $0 < \lambda < 1$. Prove that every
% convex function is continuous. Prove that every increasing convex
% function of a convex function is convex. (For example, if $f$ is
% convex, so is $e^f$.)

% If $f$ is convex in $(a,b)$ and if $a < s < t < u < b$, show that
% \begin{equation}
%   \label{eq:continuity:convex-s-t-u-ineq}
%   \frac{f(t) - f(s)}{t-s}
%   \leq \frac{f(u) - f(s)}{u-s}
%   \leq \frac{f(u) - f(t)}{u-t}.
% \end{equation}
% \begin{proof}
%   Suppose $f$ is convex in $(a,b)$ and that $a < s < t < u < b$. Note
%   that if we take
%   \begin{equation*}
%     \lambda_1 = \frac{t - s}{u - s},
%     \quad\text{and}\quad
%     \lambda_2 = \frac{t - u}{s - u}
%   \end{equation*}
%   then we get
%   \begin{equation*}
%     t = \lambda_1u + (1 - \lambda_1)s
%     \quad\text{and}\quad
%     t = \lambda_2s + (1 - \lambda_2)u.
%   \end{equation*}
%   Using the inequality \eqref{eq:continuity:convex-def}, we get
%   \begin{align*}
%     f(t) &= f(\lambda_1u + (1 - \lambda_1)s) \\
%          &\leq \lambda_1f(u) + (1 - \lambda_1)f(s) \\
%          &= \lambda_1(f(u) - f(s)) + f(s).
%   \end{align*}
%   Substituting for $\lambda_1$ and rearranging gives
%   \begin{equation*}
%     \frac{f(t) - f(s)}{t - s} \leq \frac{f(u) - f(s)}{u - s}.
%   \end{equation*}
%   Likewise, we also have
%   \begin{equation*}
%     f(t) \leq \lambda_2(f(s) - f(u)) + f(u)
%   \end{equation*}
%   so that
%   \begin{equation*}
%     \frac{f(t) - f(u)}{t - u} \leq \frac{f(s) - f(u)}{s - u}.
%   \end{equation*}
%   So the inequality \eqref{eq:continuity:convex-s-t-u-ineq} holds.

%   To establish continuity, say at the point $x\in(a,b)$, fix two
%   points $c,d$ such that $a < c < x < d < b$. Set
%   \begin{equation*}
%     M = \frac{f(d) - f(x)}{d - x}
%     \quad\text{and}\quad
%     N = \frac{f(x) - f(c)}{x - c}.
%   \end{equation*}
%   Given $\varepsilon > 0$, put
%   \begin{equation*}
%     \delta =
%     \min\left\{\frac{\varepsilon}M,
%       \frac{\varepsilon}N,
%       \frac{d - x}2,
%       \frac{x - c}2\right\}.
%   \end{equation*}
%   Now let $y\in(a,b)$ be such that $\abs{x - y} < \delta$. First, if
%   $c < x < y < d$, then \eqref{eq:continuity:convex-s-t-u-ineq}
%   implies
%   \begin{equation*}
%     \frac{f(y) - f(x)}{y - x}
%     \leq \frac{f(d) - f(x)}{d - x} = M.
%   \end{equation*}
%   Then
%   \begin{equation*}
%     \abs{f(y) - f(x)} \leq M(y - x) < M\delta \leq \varepsilon.
%   \end{equation*}

%   Lastly, let $g$ be an increasing convex function and let $f$ be
%   convex, with both functions defined on $(a,b)$. Since $g$ is
%   increasing, $s \leq t$ implies $g(s) \leq g(t)$. So we have
%   \begin{align*}
%     (g\circ f)(\lambda x + (1 - \lambda)y)
%     &\leq g(\lambda f(x) + (1 - \lambda)f(y)) \\
%     &\leq \lambda(g\circ f)(x) + (1 - \lambda)(g\circ f)(y)
%   \end{align*}
%   as required.
% \end{proof}

% \Exercise{24} Assume that $f$ is a continuous real function defined in
% $(a,b)$ such that
% \begin{equation*}
%   f\left(\frac{x + y}2\right) \leq \frac{f(x) + f(y)}2
% \end{equation*}
% for all $x,y\in(a,b)$. Prove that $f$ is convex.
% \begin{proof}
%   For all $x,y\in(a,b)$ and $\lambda\in[0,1]$, we have
%   \begin{align*}
%     f(\lambda x + (1 - \lambda)y)
%   \end{align*}
% \end{proof}

\Exercise{25} If $A\subset R^k$ and $B\subset R^k$ define $A + B$ to
be the set of all sums $\vec{x} + \vec{y}$ with $\vec{x}\in A$,
$\vec{y}\in B$.
\begin{enumerate}
\item If $K$ is compact and $C$ is closed in $R^k$, prove that $K + C$
  is closed.
  \begin{proof}
    Take $\vec{z}\not\in K + C$ and let
    \begin{equation*}
      F = \vec{z} - C = \{\vec{z} - \vec{y} \mid \vec{y}\in C\}.
    \end{equation*}
    Now suppose $\vec{a}\in F\cap K$. Then
    $\vec{a} = \vec{z} - \vec{c}$ for some $\vec{c}\in C$, so that
    $\vec{z} = \vec{a} + \vec{c} \in K + C$, which contradicts our
    choice of $\vec{z}$. Therefore $F$ and $K$ are disjoint sets.

    Next, we show that $F$ is closed. Let $\vec{a}$ be a limit point
    of $F$. Let $\{\vec{f}_n\}$ be a sequence of points in $F$
    converging to $\vec{a}$. Then each $\vec{f}_n$ can be written
    $\vec{f}_n = \vec{z} - \vec{c}_n$ for $\vec{c}_n\in C$. Then
    $\{\vec{c}_n\}$ is a sequence which converges to a point $\vec{c}$
    in $C$ (since $C$ is closed). Then $\vec{a} = \vec{z} - \vec{c}$
    so $\vec{a}\in F$.

    Since $K$ is compact and $F$ is closed, with $K$ and $F$ disjoint,
    we can, by Exercise~\ref{exercise:continuity:K-F-disjoint-delta},
    find $\delta > 0$ such that $\abs{\vec{x} - \vec{y}} < \delta$ for
    any $\vec{x}\in K$ and $\vec{y}\in F$. We will show that the open
    ball with center $\vec{z}$ and radius $\delta$ can have no points
    in common with $K + C$. If there is such a point let it be
    $\vec{x}$. Then we can write $\vec{x} = \vec{k} + \vec{c}$ for
    $\vec{k}\in K$ and $\vec{c}\in C$. But then
    \begin{equation*}
      \abs{\vec{k} - (\vec{z} - \vec{c})}
      = \abs{\vec{x} - \vec{z}} < \delta,
    \end{equation*}
    which is a contradiction since $\vec{k}\in K$ and
    $\vec{z} - \vec{c}\in F$. This contradiction shows that
    $(K + C)^c$ is open, so $K + C$ must be closed.
  \end{proof}
\item Let $\alpha$ be an irrational real number. Let $C_1$ be the set
  of all integers, let $C_2$ be the set of all $n\alpha$ with
  $n\in C_1$. Show that $C_1$ and $C_2$ are closed subsets of $R^1$
  whose sum $C_1 + C_2$ is {\em not} closed, by showing that
  $C_1 + C_2$ is a countable dense subset of $R^1$.
  \begin{proof}
    $C_1$ and $C_2$ are each sets of isolated points and so are
    closed. $C_1$ and $C_2$ are both countable sets, so $C_1 + C_2$
    must be countable also.

    We will show that $C_1 + C_2$ is dense in $[0,1]$. Let $[x]$
    denote the greatest integer less than or equal to $x$ and let
    $(x) = x - [x]$ denote the fractional part of $x$. Let $N$ be any
    positive integer and consider the $N + 1$ numbers
    $\alpha_1,\alpha_2,\dots,\alpha_{N+1}$ defined by
    \begin{equation*}
      \alpha_i = (i\alpha) = i\alpha - [i\alpha],
      \quad 1\leq i\leq N+1.
    \end{equation*}
    Note that each $\alpha_i$ belongs to $C_1 + C_2$, since
    $i\alpha\in C_2$ and $-[i\alpha]\in C_1$. Note also that each
    $\alpha_i$ is distinct, since $\alpha_i = \alpha_j$ implies that
    \begin{equation*}
      i\alpha - [i\alpha] = j\alpha - [j\alpha]
    \end{equation*}
    so
    \begin{equation*}
      \alpha = \frac{[i\alpha] - [j\alpha]}{i - j},
    \end{equation*}
    and this would imply that $\alpha$ is rational, which is a
    contradiction.

    Now consider the $N$ segments
    \begin{equation*}
      I_k = \left(\frac{k-1}N, \frac{k}N\right),
      \quad k = 1, 2, \dots, N.
    \end{equation*}
    Each $\alpha_i$ must belong to one of these segments, since each
    $\alpha_i$ cannot equal one of the endpoints (since that would
    imply that $\alpha$ is rational) and all other points in $[0,1]$
    belong to some $I_k$.

    Since there are $N+1$ points and only $N$ intervals, there must be
    at least one $I_k$ which contains at least two points $\alpha_i$
    and $\alpha_j$ with $i\neq j$. Let $\alpha_j$ be the larger of the
    two. Then $\alpha_j - \alpha_i < 1/N$. But
    $\alpha_j - \alpha_i\in C_1 + C_2$, so the segment $(0, 1/N)$
    contains a point $\beta$ in $C_1 + C_2$ for each positive integer
    $N$. Then the segment $((k-1)/N, k/N)$ also contains such a point
    for each $N$, since $(k-1)\beta$ is in this interval and also in
    $C_1 + C_2$.

    Now every segment $(a,b)\in[0,1]$ must contain a segment of the
    form $((k-1)/N, k/N)$ for some positive integers $N$ and $k$. And
    this segment has been shown to contain at least one element of
    $C_1 + C_2$. Therefore $C_1 + C_2$ is dense in $[0,1]$. Finally,
    since every point in $R^1$ can be written as the sum of a number
    in $[0,1]$ and an integer, it follows that $C_1 + C_2$ is dense in
    all of $R^1$.

    Finally, $C_1 + C_2$ cannot be closed since it is a dense proper
    subset of $R^1$.
  \end{proof}
\end{enumerate}

\Exercise{26} Suppose $X$, $Y$, $Z$ are metric spaces, and $Y$ is
compact. Let $f$ map $X$ into $Y$, let $g$ be a continuous one-to-one
mapping of $Y$ into $Z$, and put $h(x) = g(f(x))$ for $x\in X$.

Prove that $f$ is uniformly continuous if $h$ is uniformly continuous.

Prove also that $f$ is continuous if $h$ is continuous.

Show that the compactness of $Y$ cannot be omitted from the
hypotheses, even when $X$ and $Z$ are compact.
\begin{proof}
  Let $h$ be uniformly continuous. Since $g$ is a continuous
  one-to-one mapping defined on the compact metric space $Y$, we know
  that the inverse mapping $g^{-1}\colon g(Y)\to Y$ is continuous by
  Theorem~4.17. Note also that for all $x$ in $X$,
  $f(x) = g^{-1}(h(x))$.

  Now, since $g$ is continuous on a compact metric space, its image
  $g(Y)$ is also compact by Theorem~4.14. But then $g^{-1}$ has as its
  domain the compact metric space $g(Y)$, so $g^{-1}$ is also
  uniformly continuous by Theorem~4.19. Therefore $f$ is the
  composition of two uniformly continuous functions, and so is
  uniformly continuous by
  Exercise~\ref{exercise:continuity:composition-unif-cont}.

  Next, if $h$ is continuous (but not necessarily uniformly
  continuous), then $f$ must be continuous by the same argument that
  was given above.

  Finally, the compactness of $Y$ is necessary for these results to
  hold in general. To see this, let $X = Z = [0,1]$ and
  $Y = \{0\}\cup[1,\infty)$. Define $f\colon X\to Y$ by
  \begin{equation*}
    f(x) =
    \begin{cases}
      \frac1x, & \text{if $0 < x \leq 1$}, \\
      0 & \text{if $x = 0$},
    \end{cases}
  \end{equation*}
  and $g\colon Y\to Z$ by
  \begin{equation*}
    g(x) =
    \begin{cases}
      \frac1x, & \text{if $x\geq1$}, \\
      0, & \text{if $x = 0$}.
    \end{cases}
  \end{equation*}
  Now $X$ and $Z$ are compact, $g$ is a continuous one-to-one mapping,
  and $h$ is the identity function on $[0,1]$ and so is continuous,
  but $f$ is clearly not continuous.
\end{proof}
